"use strict";(self.webpackChunkthelia=self.webpackChunkthelia||[]).push([[494],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return p}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,u=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),c=s(n),p=o,h=c["".concat(u,".").concat(p)]||c[p]||d[p]||r;return n?a.createElement(h,l(l({ref:t},m),{},{components:n})):a.createElement(h,l({ref:t},m))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=c;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var s=2;s<r;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4848:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return u},default:function(){return p},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return d}});var a=n(7462),o=n(3366),r=(n(7294),n(3905)),l=["components"],i={title:"Getting started"},u=void 0,s={unversionedId:"modules/getting_started",id:"modules/getting_started",title:"Getting started",description:"When you create a new website but a feature is missing in Thelia you can add it by creating a module.",source:"@site/docs/modules/getting_started.md",sourceDirName:"modules",slug:"/modules/getting_started",permalink:"/docs/docs/modules/getting_started",draft:!1,editUrl:"https://github.com/thelia/docs/edit/main/docs/modules/getting_started.md",tags:[],version:"current",frontMatter:{title:"Getting started"},sidebar:"myAutogeneratedSidebar",previous:{title:"Caching",permalink:"/docs/docs/modules/caching"},next:{title:"Routing",permalink:"/docs/docs/modules/routing"}},m={},d=[{value:"Module structure",id:"module-structure",level:2},{value:"Module and Command line",id:"module-and-command-line",level:2},{value:"Generate a new module",id:"generate-a-new-module",level:3},{value:"Generate the model",id:"generate-the-model",level:3},{value:"Generate the sql",id:"generate-the-sql",level:3},{value:"Manage your module with composer",id:"manage-your-module-with-composer",level:2}],c={toc:d};function p(e){var t=e.components,n=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"When you create a new website but a feature is missing in Thelia you can add it by creating a module.",(0,r.kt)("br",{parentName:"p"}),"\n","We advise to create only one specific module to your website, in general we name it by the name of the project. "),(0,r.kt)("p",null,"But if you think your feature can help other users of Thelia you can create a new module only for this feature and publish it on Github, here is a list a modules published by the Thelia core team ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/thelia-modules"},"https://github.com/thelia-modules")),(0,r.kt)("h2",{id:"module-structure"},"Module structure"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"All folders and files are case sensitive"))),(0,r.kt)("p",null,"The structure of your module is like this :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\local\n  \\modules\n    \\MyModule\n      \\Config\n        config.xml   <- mandatory\n        module.xml   <- mandatory\n        routing.xml\n        schema.xml\n      MyModule.php <- mandatory\n      \\Loop\n        Product.php\n        MyLoop.php\n      ...\n")),(0,r.kt)("p",null,'Your root folder is the name of your module (in this example the name is "MyModule"). You have to create the main\nclass MyModule in the MyModule.php file. Remember, your module must be ',(0,r.kt)("a",{parentName:"p",href:"https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md"},"PSR-0")," compliant, so your main class is MyModule\\MyModule.php (yes\nnamespace use is mandatory and it's good for you). The other mandatory file is module.xml. This file contains\ninformation about module like compatibility and dependencies with other modules."),(0,r.kt)("p",null,"The config file (Config/config.xml) is mandatory. With this file you can declare all your\nservices like event listeners, loops, forms or commands."),(0,r.kt)("p",null,"Here is the body of your config.xml file :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n\n<config xmlns="http://thelia.net/schema/dic/config"\n        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:schemaLocation="http://thelia.net/schema/dic/config http://thelia.net/schema/dic/config/thelia-1.0.xsd">\n\n\n</config>\n')),(0,r.kt)("h2",{id:"module-and-command-line"},"Module and Command line"),(0,r.kt)("p",null,"Command line is very usefull for generating many thinks around modules."),(0,r.kt)("h3",{id:"generate-a-new-module"},"Generate a new module"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ php Thelia module:generate ModuleName\n")),(0,r.kt)("p",null,"This command line generate a module with all needed classes, files and folders"),(0,r.kt)("h3",{id:"generate-the-model"},"Generate the model"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ php Thelia module:generate:model ModuleName\n")),(0,r.kt)("p",null,"This command search the schema.xml file and parse it using Propel command line."),(0,r.kt)("p",null,"This file is explain in ",(0,r.kt)("a",{parentName:"p",href:"http://propelorm.org/reference/schema.html"},"Propel documentation")),(0,r.kt)("h3",{id:"generate-the-sql"},"Generate the sql"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ php Thelia module:generate:sql ModuleName\n")),(0,r.kt)("p",null,"Just like the precedent command, schema.xml is parsed and sql file is created in Config folder."),(0,r.kt)("h2",{id:"manage-your-module-with-composer"},"Manage your module with composer"),(0,r.kt)("p",null,"If you want to use composer in your module, you have to require a special package in your composer.json file. Doing this,\nyou can share your module on ",(0,r.kt)("a",{parentName:"p",href:"https://packagist.org/"},"packagist")," and of course require other dependencies for your module."),(0,r.kt)("p",null,"We have develop an installer, it will copy your module in the good directory (local/module)."),(0,r.kt)("p",null,"This is how to use it in your composer.json (Example from ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/thelia/HookTest-module"},"thelia/hooktest-module"),") : "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n    "name": "thelia/hooktest-module",\n    "type": "thelia-module",\n    "require": {\n        "thelia/installer": "~1.2"\n    },\n    "extra": {\n        "installer-name": "HookTest"\n    }\n}\n')),(0,r.kt)("p",null,"There are three important points here : "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"type")," : must be ",(0,r.kt)("inlineCode",{parentName:"li"},"thelia-module"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"require")," : require the ",(0,r.kt)("inlineCode",{parentName:"li"},"thelia/installer")," custom installer for composer."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"installer-name"),' : the directory name for your module. Here I name my package "thelia/hooktest-module" but at the end I want the name of the directory to be \xab HookTest \xbb so I use the \xab installer-name \xbb extra parameter.')))}p.isMDXComponent=!0}}]);