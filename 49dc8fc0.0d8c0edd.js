(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{128:function(e,t,o){"use strict";o.d(t,"a",(function(){return u})),o.d(t,"b",(function(){return f}));var n=o(0),a=o.n(n);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var s=a.a.createContext({}),p=function(e){var t=a.a.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},u=function(e){var t=p(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=p(o),b=n,f=u["".concat(l,".").concat(b)]||u[b]||d[b]||r;return o?a.a.createElement(f,i(i({ref:t},s),{},{components:o})):a.a.createElement(f,i({ref:t},s))}));function f(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,l=new Array(r);l[0]=b;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:n,l[1]=i;for(var s=2;s<r;s++)l[s]=o[s];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,o)}b.displayName="MDXCreateElement"},88:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return l})),o.d(t,"metadata",(function(){return i})),o.d(t,"toc",(function(){return c})),o.d(t,"default",(function(){return p}));var n=o(3),a=o(7),r=(o(0),o(128)),l={title:"How it works"},i={unversionedId:"loops/index",id:"loops/index",isDocsHomePage:!1,title:"How it works",description:"Loops are the most convenient feature in Thelia for front developers. Already there in Thelia's first version, they deserved a makeover for Thelia v2.",source:"@site/docs/loops/index.md",slug:"/loops/index",permalink:"/thelia_doc/docs/loops/index",editUrl:"https://github.com/real-goatoo/thelia_doc/edit/master/docs/loops/index.md",version:"current",sidebar:"docs",previous:{title:"How it works",permalink:"/thelia_doc/docs/events/index"},next:{title:"Create your own",permalink:"/thelia_doc/docs/loops/create"}},c=[{value:"Classic loop",id:"classic-loop",children:[]},{value:"Conditional loop",id:"conditional-loop",children:[]},{value:"Page loop",id:"page-loop",children:[]}],s={toc:c};function p(e){var t=e.components,o=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},s,o,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Loops are the most convenient feature in Thelia for front developers. Already there in Thelia's first version, they deserved a makeover for Thelia v2."),Object(r.b)("p",null,"Loops allow to get data from your shop back-end and display them in your front view. In Thelia v2, loops are a ",Object(r.b)("a",{href:"http://www.smarty.net",target:"_blank"},"Smarty v3")," plugin."),Object(r.b)("p",null,"From Thelia 2.4.0, when an unknown loop type is found in a template, no exeption is thrown in production mode, and an error is added to the log. In development mode, the exception is thrown as before. This way, disabling a module will no longer break a front office where this plugin's loops are used."),Object(r.b)("h3",{id:"classic-loop"},"Classic loop"),Object(r.b)("p",null,"Here is a piece of html code which intends to list 4 random products from your shop."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<div>\n    <div class="product-block">\n        PRODUCT 0 (ref : 0535233)<br />\n        The ideal product to have fun.<br />\n        <strong>Afford it for 70 \u20ac</strong>\n    </div>\n    <div class="product-block">\n        PRODUCT 1 (ref : 1245152)<br />\n        A very beautiful product to make you happy.<br />\n        <strong>Afford it for only 10 \u20ac (instead of 100) !</strong>\n    </div>\n    <div class="product-block">\n        PRODUCT 2 (ref : 9437252)<br />\n        A perfect product to procrastinate.<br />\n        <strong>Afford it for 20 \u20ac</strong>\n    </div>\n    <div class="product-block">\n        PRODUCT 4 (ref : 3566236)<br />\n        The product which will change your life.<br />\n        <strong>Afford it for only 1 000 \u20ac (instead of 1 000 000) !</strong>\n    </div>\n</div>\n')),Object(r.b)("p",null,"How to make this piece of code dynamic ? Gathering the products you set up in your Thelia v2 back-office ?"),Object(r.b)("p",null,"Just use a Thelia product loop :"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-smarty"}),'<div>\n    {loop type="product" name="my_product_loop" limit="4" order="random"}\n    <div class="product-block">\n        {$TITLE} (ref : {$REF})<br />\n        {$DESCRIPTION}<br />\n        <strong>\n            {if $IS_PROMO == 1}\n                Afford it for only {$PROMO_PRICE} \u20ac (instead of {$PRICE}) !\n            {else}\n                Afford it for {$PRICE} \u20ac\n            {/if}\n        </strong>\n    </div>\n    {/loop}\n</div>\n')),Object(r.b)("p",null,"And what if you want only the products you tagged as new ? And which are from category 3 and 5 ? And whose price is at least 100 \u20ac ?"),Object(r.b)("p",null,"No problem ! Here you are :"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-smarty"}),'<div>\n    {loop type="product" name="my_product_loop" limit="4" order="random" new="true" category="3,5" min_price="100"}\n    <div class="product-block">\n        [...]\n    </div>\n    {/loop}\n</div>\n')),Object(r.b)("p",null,"You can of course use a loop into another loop and pass a loop output to another loop parameter"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-smarty"}),'{loop type="category" name="my_category_loop"}\n    <h2>{$TITLE}</h2>\n        {loop type="product" name="my_product_loop" category="{$ID}"}\n        <div class="product-block">\n            [...]\n        </div>\n        {/loop}\n{/loop}\n</div>\n')),Object(r.b)("p",null,"Thelia 2 provides a lot of loop types. You can see all the loops and their parameters / outputs in the ",Object(r.b)("strong",null,"Loops")," sidebar menu."),Object(r.b)("h3",{id:"conditional-loop"},"Conditional loop"),Object(r.b)("p",null,"Conditional loops allow to define a different behaviour depending on if the a classic loop displays something or not."),Object(r.b)("p",null,"A conditional loop is therefore linked to a classic loop using the ",Object(r.b)("inlineCode",{parentName:"p"},"rel")," attribute which must match a classic loop ",Object(r.b)("inlineCode",{parentName:"p"},"name")," attribute."),Object(r.b)("p",null,"For example, you want to display all the associated content of a product in an unorder list (ul). If the product has no associated contents you won't display empty ",Object(r.b)("inlineCode",{parentName:"p"},"<ul></ul>"),". And you want a message to inform there is no available content. You can use a conditional loop to do this."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-smarty"}),'{ifloop rel="my_associated_content_loop"}\n    Associated contents for this product :\n    <ul>\n        {loop type="associated_content" name="my_associated_content_loop" product="12"}\n            <li>\n                <a href="{$URL}">{$TITLE}</a>\n            </li>\n        {/loop}\n    </ul>\n{/ifloop}\n{elseloop rel="my_associated_content_loop"}\n    No associated content for this product\n{/elseloop}\n')),Object(r.b)("h3",{id:"page-loop"},"Page loop"),Object(r.b)("p",null,"Page loops can be use on any classic loop which has ",Object(r.b)("inlineCode",{parentName:"p"},"page")," parameter. Page loops list all the pages the classic loop needs to display all it's returns."),Object(r.b)("p",null,"A page loop is therefore linked to a classic loop using the ",Object(r.b)("inlineCode",{parentName:"p"},"rel")," attribute which must match a classic loop ",Object(r.b)("inlineCode",{parentName:"p"},"name")," attribute."),Object(r.b)("p",null,"By default, 10 pages are displayed. You can change this value using ",Object(r.b)("inlineCode",{parentName:"p"},"limit")," parameter."),Object(r.b)("p",null,"List of output parameters :"),Object(r.b)("div",{class:"table-responsive"},Object(r.b)("table",{class:"table table-striped table-bordered"},Object(r.b)("thead",null,Object(r.b)("tr",null,Object(r.b)("th",null,"Variable"),Object(r.b)("th",null,"Description"))),Object(r.b)("tbody",null,Object(r.b)("tr",null,Object(r.b)("td",null,"$PAGE"),Object(r.b)("td",null,"Current page number. This value is equal to the ```page``` loop parameter.")),Object(r.b)("tr",null,Object(r.b)("td",null,"$END"),Object(r.b)("td",null,"The last displayed page number")),Object(r.b)("tr",null,Object(r.b)("td",null,"$CURRENT"),Object(r.b)("td",null,"on each loop, this value is incremented. So it's started with the $PAGE value and end with the $END value")),Object(r.b)("tr",null,Object(r.b)("td",null,"$LAST"),Object(r.b)("td",null,"Max page number. If a loop generates 761 pages, the value of $LAST is 761")),Object(r.b)("tr",null,Object(r.b)("td",null,"$PREV"),Object(r.b)("td",null,"previous page number. This value is always $PAGE-1 if $PAGE is greater than 1. The value is 1 therefore")),Object(r.b)("tr",null,Object(r.b)("td",null,"$NEXT"),Object(r.b)("td",null,"next page number. This value is always $PAGE+1 if $PAGE is less than $LAST. The value is $LAST therefore"))))),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-smarty"}),'<div class="text-center">\n    <ul class="pagination pagination-centered">\n    {pageloop rel="customer_list" limit="20"}\n        {if $PAGE == $CURRENT && $PAGE > 2}\n            <li><a href="{url path="/admin/customers" page=$PREV}">&lsaquo;</a></li>\n        {/if}\n\n        {if $PAGE != $CURRENT}\n            <li><a href="{url path="/admin/customers" page="{$PAGE}"}">{$PAGE}</a></li>\n\n        {else}\n            <li class="active"><a href="#">{$PAGE}</a></li>\n        {/if}\n\n        {if $PAGE == $END && $PAGE < $LAST}\n            <li><a href="{url path="/admin/customers" page=$NEXT}">&rsaquo;</a></li>\n        {/if}\n    {/pageloop}\n    </ul>\n</div>\n')))}p.isMDXComponent=!0}}]);